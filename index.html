<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google OAuth with Input Fields</title>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>

  <h1>Google OAuth --- Enter Your Keys</h1>
  <!-- Form to input Client ID and Client Secret -->
  <form id="key-form">
    <label for="client-id">Google Client ID:</label>
    <input type="text" id="client-id" placeholder="Enter Google Client ID" required>
    <br>
    <label for="client-secret">Google Client Secret:</label>
    <input type="text" id="client-secret" placeholder="Enter Google Client Secret" required>
    <br>
    <button type="submit">Start Authentication</button>
  </form>

  <button id="login-button" style="display:none;">Login with Google</button>

  <script>
  // Load the Google API library and initialize auth2
  gapi.load('auth2', function() {
    console.log('Google API library loaded successfully.');
  });

  // Google login button click handler
  document.getElementById('login-button').onclick = function() {
    if (window.GOOGLE_CLIENT_ID && window.GOOGLE_CLIENT_SECRET) {
      gapi.auth2.init({
        client_id: window.GOOGLE_CLIENT_ID,
      }).then(function(auth2) {
        auth2.signIn().then(onSignIn);
      }).catch(function(error) {
        console.error('Error initializing Google Auth:', error);
      });
    } else {
      alert("Client ID and Client Secret are missing.");
    }
  };

  // Handle the sign-in and token retrieval
  function onSignIn(googleUser) {
    const id_token = googleUser.getAuthResponse().id_token;
    const access_token = googleUser.getAuthResponse().access_token;

    // Display the tokens in the console (or you can send them to your backend)
    console.log("Access Token: ", access_token);
    console.log("ID Token: ", id_token);

    alert('Tokens retrieved successfully! You can copy them from the console.');
  }
</script>

</body>
</html>
